<mat-card>
  <mat-card-header>
    <mat-card-title>Criar Nova Nota</mat-card-title>
  </mat-card-header>
  
  <mat-card-content>
    <form [formGroup]="noteForm" (ngSubmit)="onSubmit()">
      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Cliente</mat-label>
        <mat-select formControlName="cliente_id" required>
          <mat-option *ngFor="let cliente of clientes" [value]="cliente.id">
            {{ cliente.nome }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Usu√°rio</mat-label>
        <mat-select formControlName="usuario_id" required>
          <mat-option *ngFor="let usuario of usuarios" [value]="usuario.id">
            {{ usuario.nome }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Texto da nota</mat-label>
        <textarea matInput formControlName="texto" rows="4" 
                  placeholder="Digite sua nota aqui..." required></textarea>
        <mat-hint align="end">{{ noteForm.get('texto')?.value?.length || 0 }}/1000</mat-hint>
      </mat-form-field>

      <button mat-raised-button color="primary" type="submit" 
              [disabled]="noteForm.invalid || loading" class="full-width">
        <mat-spinner *ngIf="loading" diameter="20"></mat-spinner>
        <span *ngIf="!loading">Criar Nota</span>
      </button>
    </form>
  </mat-card-content>
</mat-card>